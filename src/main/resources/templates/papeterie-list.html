<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/styles.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Table Page</title>
    <style>
               /* Reset some default styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Set a background image for the page */
.page-container {
    background-image: url('https://apei-asso.com/wp-content/uploads/2023/10/V100.jpg');
    background-size: cover;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
}

/* Style the navbar */
.navbar {
    background: rgba(0, 0, 0, 0.7); /* Transparent background */
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    position: absolute;
    top: 0;
    left: 0;
}

.logo img {
    max-width: 50px;
}

/* Style the table container */
.table-container {
    background: rgba(0, 0, 0, 0.5); /* Transparent background */
    padding: 20px;
    border-radius: 10px;
    text-align: center;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
}

.data-table th, .data-table td {
    border: 1px solid #fff;
    padding: 10px;
    color: #fff;
}

/* Style the Add button */
.add-button {
    background: #007BFF;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
    margin-bottom: 20px;
    float: left; /* Move the button to the top left */
}

/* Style the Delete and Edit buttons with hover effects */
.delete-button, .edit-button {
    background: #FF3333; /* Delete button color */
    color: #fff;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    margin-right: 5px;
}

.edit-button {
    background: #33FF33; /* Edit button color */
}

.delete-button:hover {
    background: #FF0000; /* Hover color for Delete button */
}

.edit-button:hover {
    background: #00FF00; /* Hover color for Edit button */
}
nav ul {
    list-style: none;
}

nav ul li {       /* Reset some default styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Set a background image for the page */
.page-container {
    background-image: url('https://www.vascareers.com/wp-content/uploads/2019/07/1-Copy-2-1080x600.jpg');
    background-size: cover;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
}

/* Style the navbar */
.navbar {
    background: rgba(0, 0, 0, 0.7); /* Transparent background */
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    position: absolute;
    top: 0;
    left: 0;
}

.logo img {
    max-width: 50px;
}

/* Style the table container */
.table-container {
    background: rgba(0, 0, 0, 0.5); /* Transparent background */
    padding: 20px;
    border-radius: 10px;
    text-align: center;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
}

.data-table th, .data-table td {
    border: 1px solid #fff;
    padding: 10px;
    color: #fff;
}
.search-container{
 background: #007BFF;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
    margin-bottom: 20px;
    float: left; /* Move the button to the top left */
}

/* Style the Add button */
.add-button {
    background: #007BFF;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
    margin-bottom: 20px;
    float: left; /* Move the button to the top left */
}

/* Style the Delete and Edit buttons with hover effects */
.delete-button, .edit-button {
    background: #FF3333; /* Delete button color */
    color: #fff;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    margin-right: 5px;
}

.edit-button {
    background: #33FF33; /* Edit button color */
}

.delete-button:hover {
    background: #FF0000; /* Hover color for Delete button */
}

.edit-button:hover {
    background: #00FF00; /* Hover color for Edit button */
}
nav ul {
    list-style: none;
}

nav ul li {
    display: inline;
    margin-right: 20px;
}

nav a {
    text-decoration: none;
    color: #fff;
}
    display: inline;
    margin-right: 20px;
}

nav a {
    text-decoration: none;
    color: #fff;
}
    </style>
</head>
<body>
<div class="page-container">
    <header class="navbar">
        <div class="logo">
            <img th:src="@{https://img.freepik.com/vecteurs-libre/conception-modele-logo-magasin-papeterie_23-2149881289.jpg}" alt="Logo" width="50" height="50">
        </div>
        <nav>
            <ul>
                <li><a th:href="@{/Dashboard}">Home</a></li>
            </ul>
        </nav>
    </header>
    <h1>Papeterie Stock</h1>
    <div class="table-container">
        <a th:href="@{/papeteries/showFormForAdd}" sec:authorize="hasRole('ROLE_VENDOR')"><button class="add-button">Add Papeterie Stock</button></a>
        <div class="search-container" >
            <form th:action="@{/papeteries/page/1}">
                Filter: <input type="text" name="keyword" th:value="${keyword}" required/>
                &nbsp;
                <input type="submit" value="Search"/>
                &nbsp;
                <input type="button" value="Clear" onclick="clearFilter()"/>
            </form>
        </div>
        <table class="data-table">
            <thead>
            <tr>
                <th>Item Name</th>
                <th>Description</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Purchase Date</th>
                <th>Category</th>
                <th>Item Specification</th>
                <th>Item Image</th>
                <th>Supplier Id</th>
                <th>Supplier Names</th>
                <th>Supplier Email</th>
                <th> Action</th>
                <th> </th>

            </tr>
            </thead>
            <tbody>
            <tr th:each="tempPapeterie : ${thePapeteries}">
                <td th:text="${tempPapeterie.name}"/>
                <td th:text="${tempPapeterie.description}"/>
                <td th:text="${tempPapeterie.price}"/>
                <td th:text="${tempPapeterie.quantity}"/>
                <td th:text="${tempPapeterie.purchaseDate}"/>
                <td th:text="${tempPapeterie.category}"/>
                <td><a th:href="@{'/papeteries/view/' + ${tempPapeterie.specification}}" th:text="${tempPapeterie.specification}"></a></td>
                <td style="background-color:black;">
                    <img class="img-fluid" th:src="@{/papeteries/images/{filename}(filename=${tempPapeterie.itemImage})}" th:alt="${file}" style="max-width:100%; max-height:100%;"/>
                </td>
                <td th:text="${tempPapeterie.user.id}" />
                <td th:text="${tempPapeterie.user.firstName} +' '+ ${tempPapeterie.user.lastName}"/>
                <td th:text="${tempPapeterie.user.email}"/>

                <td>
                    <div>
                        <form th:action="@{/papeteries/showFormForUpdate}" sec:authorize="hasRole('ROLE_VENDOR')" method="post">
                            <input type="hidden" name="papeterieId" th:value="${tempPapeterie.id}" />
                            <button type="submit" class="btn btn-info btn-sm">Update</button>
                        </form>
                    </div>
                    <br/>
                    <div>
                        <form sec:authorize="hasRole('ROLE_VENDOR')" th:action="@{/papeteries/deletePapeterie}" method="post" onsubmit="return confirm('Are you sure you want to delete this Papeterie stock?')">
                            <input type="hidden" name="papeterieId" th:value="${tempPapeterie.id}" />
                            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                        </form>

                    </div>
                </td>
                <td>
                    <a th:href="@{/email/email-attachment}" sec:authorize="hasRole('ROLE_BUYER')" class="btn btn-primary btn-sm mb-3">
                        ORDER
                        <input type="hidden" name="mailTo" th:value="${tempPapeterie.user.email}" />
                    </a>


                </td>

            </tr>

            </tbody>
        </table>
    </div>
    <div class="page-color">
        <center>
            Total Stocks: [[${totalItems}]] - Page [[${currentPage}]] of [[${totalPages}]]
            &nbsp; &nbsp; - &nbsp; &nbsp;
            <a th:if="${currentPage > 1}" th:href="@{/papeteries/page/1}">First</a>
            <span th:unless="${currentPage > 1}">First</span>
            &nbsp;&nbsp;
            <a th:if="${currentPage > 1}" th:href="@{'/papeteries/page/' + ${currentPage - 1}}">Previous </a>
            <span th:unless="${currentPage > 1}">Previous</span>
            &nbsp; &nbsp;
            <span th:each="i: ${#numbers.sequence(1, totalPages)}" th:if="${totalPages != 0}">
    <a th:if="${i != currentPage}" th:href="@{'/papeteries/page/' + ${i}}">[[${i}]]</a>
    <span th:unless="${i != currentPage}">[[${i}]]</span>
    &nbsp;&nbsp;
</span>
            <span th:each="i: ${#numbers.sequence(1, 1)}" th:if="${totalPages == 0}">
    <a th:if="${i != currentPage}" th:href="@{'/papeteries/page/' + ${i}}">[[${i}]]</a>
    <span th:unless="${i != currentPage}">[[${i}]]</span>
    &nbsp;&nbsp;
</span>
            <a th:if="${currentPage < totalPages}" th:href="@{'/papeteries/page/' + ${currentPage + 1}}">Next</a>
            <span th:unless="${currentPage < totalPages}">Next</span>

            &nbsp;&nbsp;
            <a th:if="${currentPage < totalPages}" th:href="@{'/papeteries/page/' + ${totalPages}}">Last</a>
            <span th:unless="${currentPage < totalPages}">Last</span>

        </center>
    </div>
    <script type="text/javascript">
    function clearFilter(){
    window.location = '/papeteries/list';
    }
    </script>
</div>
</body>
</html>
